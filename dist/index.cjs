"use strict";var Q=Object.defineProperty;var g=(e,a,o)=>a in e?Q(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o;var f=(e,a,o)=>(g(e,typeof a!="symbol"?a+"":a,o),o),R=(e,a,o)=>{if(!a.has(e))throw TypeError("Cannot "+o)};var h=(e,a,o)=>(R(e,a,"read from private field"),o?o.call(e):a.get(e)),C=(e,a,o)=>{if(a.has(e))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(e):a.set(e,o)},V=(e,a,o,n)=>(R(e,a,"write to private field"),n?n.call(e,o):a.set(e,o),o);var E=(e,a,o)=>(R(e,a,"access private method"),o);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("vue"),F=require("pinia");class ee{constructor(a,o,n){f(this,"element");f(this,"cb");f(this,"settings");f(this,"listener",function(a){typeof this.cb=="function"&&a.deltaY&&this.cb({dir:a.deltaY/Math.abs(a.deltaY),wheel:a.deltaY*this.settings.wheelIntensity})}.bind(this));this.element=a,this.cb=o,this.settings=n,this.subscribe()}subscribe(){this.element.addEventListener("wheel",this.listener)}unsubscribe(){this.element.removeEventListener("wheel",this.listener)}}var P,I,L,k,D,z,M,H,p,Y;class oe{constructor(a,o,n){C(this,L);C(this,D);C(this,M);C(this,p);C(this,P,{sY:0,eY:0});f(this,"prevY",0);C(this,I,void 0);f(this,"cb");f(this,"deltaY");f(this,"minDelta");f(this,"settings");this.cb=o,V(this,I,a),E(this,L,k).call(this),this.settings=n,this.minDelta=n.minTouchmoveDistance,this.useCallback=this.useCallback.bind(this),this.destroy=this.destroy.bind(this)}destroy(){h(this,I).removeEventListener("touchstart",E(this,D,z),!1),h(this,I).removeEventListener("touchmove",E(this,M,H),!1),h(this,I).removeEventListener("touchend",E(this,p,Y),!1)}useCallback(a){typeof this.cb=="function"&&a&&this.cb({dir:a/Math.abs(a),wheel:a*this.settings.touchmoveIntensity})}}P=new WeakMap,I=new WeakMap,L=new WeakSet,k=function(){h(this,I).addEventListener("touchstart",E(this,D,z).bind(this),!1),h(this,I).addEventListener("touchmove",E(this,M,H).bind(this),!1),h(this,I).addEventListener("touchend",E(this,p,Y).bind(this),!1)},D=new WeakSet,z=function(a){const o=a.touches[0];h(this,P).sY=o.screenY,this.prevY=h(this,P).sY,h(this,P).eY=h(this,P).sY},M=new WeakSet,H=function(a){const o=a.touches[0];this.prevY=h(this,P).eY,h(this,P).eY=o.screenY,this.deltaY=h(this,P).sY-h(this,P).eY;const n=h(this,P).sY-this.prevY;Math.abs(n)>Math.abs(this.deltaY)&&(h(this,P).sY=this.prevY),Math.abs(this.deltaY)>this.minDelta&&this.useCallback(this.deltaY)},p=new WeakSet,Y=function(a){Math.abs(this.deltaY)>this.minDelta&&this.useCallback(this.deltaY)};var b=(e=>(e.MS_EDGE="MS_EDGE",e.EDGE_CHROMIUM_BASED="EDGE_CHROMIUM_BASED",e.OPERA="OPERA",e.CHROME="CHROME",e.MS_IE="MS_IE",e.MOZILLA_FIREFOX="MOZILLA_FIREFOX",e.SAFARI="SAFARI",e.OTHER="OTHER",e))(b||{});const ae=()=>{const e=window.navigator.userAgent.toLowerCase();switch(!0){case e.indexOf("edge")>-1:return"MS_EDGE";case e.indexOf("edg/")>-1:return"EDGE_CHROMIUM_BASED";case(e.indexOf("opr")>-1&&!!window.opr):return"OPERA";case(e.indexOf("chrome")>-1&&!!window.chrome):return"CHROME";case e.indexOf("trident")>-1:return"MS_IE";case e.indexOf("firefox")>-1:return"MOZILLA_FIREFOX";case e.indexOf("safari")>-1:return"SAFARI";default:return"OTHER"}};class te{constructor(a,o,n,u){f(this,"swipe");f(this,"scroll");f(this,"keyboard");f(this,"callback");if(!a){console.error("[Detector]: dom element is required");return}const t={wheelIntensity:n.wheelIntensity,touchmoveIntensity:n.touchmoveIntensity,minTouchmoveDistance:n.minTouchmoveDistance,safariWheelIntensity:n.safariWheelIntensity,safariTouchmoveIntensity:n.safariTouchmoveIntensity,chromeWheelIntensity:n.chromeWheelIntensity,chromeTouchmoveIntensity:n.chromeTouchmoveIntensity,operaWheelIntensity:n.operaWheelIntensity,operaTouchmoveIntensity:n.operaTouchmoveIntensity,edgeWheelIntensity:n.edgeWheelIntensity,edgeTouchmoveIntensity:n.edgeTouchmoveIntensity,mozillaWheelIntensity:n.mozillaWheelIntensity,mozillaTouchmoveIntensity:n.mozillaTouchmoveIntensity},v={wheelIntensity:m("WheelIntensity"),touchmoveIntensity:m("TouchmoveIntensity"),minTouchmoveDistance:t.minTouchmoveDistance};function m(d){switch(u){case b.SAFARI:return t[`safari${d}`];case b.CHROME:return t[`chrome${d}`];case b.OPERA:return t[`opera${d}`];case(b.MS_EDGE||b.EDGE_CHROMIUM_BASED):return t[`edge${d}`];case b.MOZILLA_FIREFOX:return t[`mozilla${d}`];default:return d==="WheelIntensity"?t.wheelIntensity:t.touchmoveIntensity}}this.callback=o||(()=>{}),this.scroll=new ee(a,this.controlScroll.bind(this),v),this.swipe=new oe(a,this.controlScroll.bind(this),v),this.destroy=this.destroy.bind(this)}controlScroll(a){this.callback(a)}destroy(){this.scroll.unsubscribe(),this.swipe.destroy()}}const le=(e,a=0)=>{const o=l.ref(!0),n=l.ref(performance.now());l.onMounted(()=>u(0)),l.onUnmounted(()=>o.value=!1);function u(t){o.value&&(t-n.value>a&&(e(),n.value=performance.now()),requestAnimationFrame(u))}},ne=(e,a,o)=>a===0&&e<.1?0:e+(a-e)*o;var A=(e=>(e.DESKTOP="DESKTOP",e.TABLET="TABLET",e.MOBILE="MOBILE",e))(A||{});function re(){const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"TABLET":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"MOBILE":"DESKTOP"}const U=F.defineStore("privateSmoothPage",()=>{const e=l.ref(null),a=l.ref(0),o=l.ref(0),n=l.ref(!1),u=l.ref(!1),t=l.ref(!1),v=l.ref(!1),m=l.ref(!1),d=l.ref(A.DESKTOP),y=l.ref(b.OTHER),S=l.ref(!1),N=l.ref(!1),w=l.ref(!1),T=l.ref(0),c=r=>{e.value=r},s=r=>{a.value=r},W=r=>{u.value=r},O=r=>{o.value=r},$=r=>{n.value=r},K=r=>{t.value=r},q=r=>{m.value=r},X=r=>{v.value=r},Z=r=>{d.value=r},j=r=>{y.value=r},B=r=>{N.value=r},x=r=>{S.value=r},J=r=>{w.value=r},_=r=>{T.value=r};return{settings:e,currentScrollPosition:a,isEnabled:u,nextScrollPosition:o,isTriggeringScrollPosition:n,isMounted:t,isInited:m,isEarlierMounted:v,deviceType:d,needReload:N,isDestroyedByUser:S,browser:y,isPreventScroll:w,savedCurrentScrollPositionForDestroy:T,setSettings:c,setCurrentScrollPosition:s,setIsEnabled:W,setNextScrollPosition:O,setIsTriggeringScrollPosition:$,setIsMounted:K,setIsInited:q,setIsEarlierMounted:X,setDeviceType:Z,setNeedReload:B,setBrowser:j,preventScroll:J,setSavedCurrentScrollPositionForDestroy:_,reload:(r=!1)=>{B(!0),r&&(s(0),O(0),_(0))},destroy:(r=!1)=>{x(!0),r&&(s(0),O(0),_(0))},init:(r=!1)=>{x(!1),r&&(s(0),O(0),_(0))}}}),ie=e=>{var a,o,n,u,t,v,m,d,y,S;return{mode:(e==null?void 0:e.mode)||i.mode,smoothness:(e==null?void 0:e.smoothness)||i.smoothness,wheelIntensity:(e==null?void 0:e.wheelIntensity)||i.wheelIntensity,touchmoveIntensity:(e==null?void 0:e.touchmoveIntensity)||i.touchmoveIntensity,safariWheelIntensity:(e==null?void 0:e.safariWheelIntensity)||(e==null?void 0:e.wheelIntensity)||i.wheelIntensity,safariTouchmoveIntensity:(e==null?void 0:e.safariTouchmoveIntensity)||(e==null?void 0:e.touchmoveIntensity)||i.wheelIntensity,chromeWheelIntensity:(e==null?void 0:e.chromeWheelIntensity)||(e==null?void 0:e.wheelIntensity)||i.wheelIntensity,chromeTouchmoveIntensity:(e==null?void 0:e.chromeTouchmoveIntensity)||(e==null?void 0:e.touchmoveIntensity)||i.wheelIntensity,operaWheelIntensity:(e==null?void 0:e.operaWheelIntensity)||(e==null?void 0:e.wheelIntensity)||i.wheelIntensity,operaTouchmoveIntensity:(e==null?void 0:e.operaTouchmoveIntensity)||(e==null?void 0:e.touchmoveIntensity)||i.wheelIntensity,edgeWheelIntensity:(e==null?void 0:e.edgeWheelIntensity)||(e==null?void 0:e.wheelIntensity)||i.wheelIntensity,edgeTouchmoveIntensity:(e==null?void 0:e.edgeTouchmoveIntensity)||(e==null?void 0:e.touchmoveIntensity)||i.wheelIntensity,mozillaWheelIntensity:(e==null?void 0:e.mozillaWheelIntensity)||(e==null?void 0:e.wheelIntensity)||i.wheelIntensity,mozillaTouchmoveIntensity:(e==null?void 0:e.mozillaTouchmoveIntensity)||(e==null?void 0:e.touchmoveIntensity)||i.wheelIntensity,watchIsEnabledOn:(e==null?void 0:e.watchIsEnabledOn)||i.watchIsEnabledOn,minTouchmoveDistance:(e==null?void 0:e.minTouchmoveDistance)||i.minTouchmoveDistance,minWidth:(e==null?void 0:e.minWidth)||i.minWidth,renderDelay:(e==null?void 0:e.renderDelay)||i.renderDelay,enableOnTouchDevices:(e==null?void 0:e.enableOnTouchDevices)||i.enableOnTouchDevices,resetScrollPositionOnStateChanging:(e==null?void 0:e.resetScrollPositionOnStateChanging)||i.resetScrollPositionOnStateChanging,reloadPageOnStateChanging:(e==null?void 0:e.reloadPageOnStateChanging)||i.reloadPageOnStateChanging,defaultClassNames:{smoothPage:((a=e==null?void 0:e.defaultClassNames)==null?void 0:a.smoothPage)||i.defaultClassNames.smoothPage,smoothPageBody:((o=e==null?void 0:e.defaultClassNames)==null?void 0:o.smoothPageBody)||i.defaultClassNames.smoothPageBody,smoothPageEnabled:((n=e==null?void 0:e.defaultClassNames)==null?void 0:n.smoothPageEnabled)||i.defaultClassNames.smoothPageEnabled,smoothPageVertical:((u=e==null?void 0:e.defaultClassNames)==null?void 0:u.smoothPageVertical)||i.defaultClassNames.smoothPageVertical,smoothPageHorizontal:((t=e==null?void 0:e.defaultClassNames)==null?void 0:t.smoothPageHorizontal)||i.defaultClassNames.smoothPageHorizontal},additionalClassNames:{smoothPage:((v=e==null?void 0:e.additionalClassNames)==null?void 0:v.smoothPage)||i.additionalClassNames.smoothPage,smoothPageBody:((m=e==null?void 0:e.additionalClassNames)==null?void 0:m.smoothPageBody)||i.additionalClassNames.smoothPageBody,smoothPageEnabled:((d=e==null?void 0:e.additionalClassNames)==null?void 0:d.smoothPageEnabled)||i.additionalClassNames.smoothPageEnabled,smoothPageVertical:((y=e==null?void 0:e.additionalClassNames)==null?void 0:y.smoothPageVertical)||i.additionalClassNames.smoothPageVertical,smoothPageHorizontal:((S=e==null?void 0:e.additionalClassNames)==null?void 0:S.smoothPageHorizontal)||i.additionalClassNames.smoothPageHorizontal}}},i={mode:"vertical",smoothness:.075,wheelIntensity:4,touchmoveIntensity:4,minTouchmoveDistance:40,watchIsEnabledOn:"load-resize",minWidth:0,renderDelay:0,enableOnTouchDevices:!0,resetScrollPositionOnStateChanging:!1,reloadPageOnStateChanging:!1,defaultClassNames:{smoothPage:"t-smoothpage",smoothPageBody:"t-smoothpage--body",smoothPageEnabled:"t-smoothpage--enabled",smoothPageVertical:"t-smoothpage--vertical",smoothPageHorizontal:"t-smoothpage--horizontal"},additionalClassNames:{smoothPage:"",smoothPageBody:"",smoothPageEnabled:"",smoothPageVertical:"",smoothPageHorizontal:""}},G=l.defineComponent({__name:"index",props:{settings:null},setup(e){const a=e,o=U(),n=l.inject("smoothPageSettings",void 0),u=ie(n),t=l.reactive({...u,...(a==null?void 0:a.settings)||{}});l.watchEffect(()=>{o.setSettings(t)});const v=l.ref(null),m=l.ref(null);l.onMounted(()=>{o.setSettings(t),o.setDeviceType(re()),o.setIsEnabled(w()),o.setBrowser(ae()),o.setIsMounted(!0),setTimeout(()=>o.setIsEarlierMounted(!0),100)}),l.onUnmounted(()=>{o.setIsMounted(!1)}),l.watchEffect(()=>{o.isEnabled&&!o.isInited?d():!o.isEnabled&&o.isInited&&y()});function d(){v.value=new te(document,N,t,o.browser),t.resetScrollPositionOnStateChanging&&(o.setCurrentScrollPosition(0),o.setNextScrollPosition(0),window.scroll(0,0)),t.reloadPageOnStateChanging&&o.isEarlierMounted&&setTimeout(()=>location.reload(),100),o.setIsInited(!0),o.setNeedReload(!1),S(!0)}function y(){var c;(c=v.value)==null||c.destroy(),t.resetScrollPositionOnStateChanging?(o.setCurrentScrollPosition(0),o.setNextScrollPosition(0),window.scroll(0,0)):window.scroll(0,o.savedCurrentScrollPositionForDestroy),t.reloadPageOnStateChanging&&o.isEarlierMounted&&setTimeout(()=>location.reload(),100),o.setIsInited(!1),S(!1)}function S(c){const s=document.querySelector("html");if(s){if(c){t.defaultClassNames.smoothPageEnabled&&s.classList.add(t.defaultClassNames.smoothPageEnabled),t.additionalClassNames.smoothPageEnabled&&s.classList.add(t.additionalClassNames.smoothPageEnabled),t.mode==="vertical"?(t.defaultClassNames.smoothPageVertical&&s.classList.add(t.defaultClassNames.smoothPageVertical),t.additionalClassNames.smoothPageVertical&&s.classList.add(t.additionalClassNames.smoothPageVertical)):(t.defaultClassNames.smoothPageHorizontal&&s.classList.add(t.defaultClassNames.smoothPageHorizontal),t.additionalClassNames.smoothPageHorizontal&&s.classList.add(t.additionalClassNames.smoothPageHorizontal));return}t.defaultClassNames.smoothPageEnabled&&s.classList.remove(t.defaultClassNames.smoothPageEnabled),t.additionalClassNames.smoothPageEnabled&&s.classList.remove(t.additionalClassNames.smoothPageEnabled),t.mode==="vertical"?(t.defaultClassNames.smoothPageVertical&&s.classList.remove(t.defaultClassNames.smoothPageVertical),t.additionalClassNames.smoothPageVertical&&s.classList.remove(t.additionalClassNames.smoothPageVertical)):(t.defaultClassNames.smoothPageHorizontal&&s.classList.remove(t.defaultClassNames.smoothPageHorizontal),t.additionalClassNames.smoothPageHorizontal&&s.classList.remove(t.additionalClassNames.smoothPageHorizontal))}}l.watchEffect(()=>{o.needReload&&y()});function N(c){if(o.isPreventScroll||!m.value)return;const s=m.value.getBoundingClientRect().height-window.innerHeight,W=m.value.getBoundingClientRect().width-window.innerWidth,O=t.mode==="vertical"?s:W;o.setNextScrollPosition(Math.max(0,Math.min(o.currentScrollPosition+c.wheel,O)))}le(()=>{o.isPreventScroll||o.isMounted&&(o.isTriggeringScrollPosition||(t.watchIsEnabledOn==="load-resize"&&o.setIsEnabled(w()),o.isEnabled?(o.setCurrentScrollPosition(ne(o.currentScrollPosition,o.nextScrollPosition,t.smoothness)),o.setSavedCurrentScrollPositionForDestroy(o.currentScrollPosition)):(o.setCurrentScrollPosition(window.scrollY),o.setNextScrollPosition(window.scrollY))))},t.renderDelay);function w(){return o.isDestroyedByUser?!1:(t.enableOnTouchDevices||o.deviceType===A.DESKTOP)&&window.innerWidth>=t.minWidth}const T=l.computed(()=>{if(o.isEnabled){if(t.mode==="vertical")return{transform:`translate3d(0, ${-o.currentScrollPosition}px, 0)`};if(t.mode==="horizontal")return{transform:`translate3d(${-o.currentScrollPosition}px, 0, 0)`}}return{}});return(c,s)=>(l.openBlock(),l.createElementBlock("div",{class:l.normalizeClass([t.defaultClassNames.smoothPage,t.additionalClassNames.smoothPage])},[l.createElementVNode("div",{ref_key:"contentRef",ref:m,style:l.normalizeStyle(l.unref(T)),class:l.normalizeClass([t.defaultClassNames.smoothPageBody,t.additionalClassNames.smoothPageBody])},[l.renderSlot(c.$slots,"default")],6)],2))}});const se=F.defineStore("publicSmoothPage",()=>{const e=U(),a=l.computed(()=>e.settings),o=l.computed(()=>e.currentScrollPosition),n=l.computed(()=>e.isEnabled),u=l.computed(()=>e.isTriggeringScrollPosition),t=l.computed(()=>e.isMounted),v=l.computed(()=>e.isInited),m=l.computed(()=>e.deviceType),d=l.computed(()=>e.browser),y=l.computed(()=>e.isPreventScroll);return{settings:a,currentScrollPosition:o,isEnabled:n,isTriggeringScrollPosition:u,isMounted:t,isInited:v,deviceType:m,browser:d,isPreventScroll:y,preventScroll:c=>e.preventScroll(c),reload:(c=!1)=>e.reload(c),destroy:(c=!1)=>e.destroy(c),init:(c=!1)=>e.init(c)}}),ce={install(e,a){e.component("SmoothPage",G),e.provide("smoothPageSettings",a||{})}};exports.SmoothPage=G;exports.default=ce;exports.useSmoothPage=se;
